diff --git a/dist/main.cjs b/dist/main.cjs
index ed70ed9564812d87ba2e132bba610234956c105d..e1a952e5941adc79d8c20fc16f6d33c1bea2afb3 100644
--- a/dist/main.cjs
+++ b/dist/main.cjs
@@ -1 +1 @@
-"use strict";var S=(n,r,e)=>{if(!r.has(n))throw TypeError("Cannot "+e)};var F=(n,r,e)=>(S(n,r,"read from private field"),e?e.call(n):r.get(n)),y=(n,r,e)=>{if(r.has(n))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(n):r.set(n,e)},U=(n,r,e,i)=>(S(n,r,"write to private field"),i?i.call(n,e):r.set(n,e),e);var v=(n,r,e)=>(S(n,r,"access private method"),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const I=require("electron"),R="electron-trpc";function ee(n){return!!n&&!Array.isArray(n)&&typeof n=="object"}class re extends Error{}function ne(n){if(n instanceof Error)return n;const r=typeof n;if(!(r==="undefined"||r==="function"||n===null)){if(r!=="object")return new Error(String(n));if(ee(n)){const e=new re;for(const i in n)e[i]=n[i];return e}}}class N extends Error{constructor(r){const e=ne(r.cause),i=r.message??(e==null?void 0:e.message)??r.code;super(i,{cause:e}),this.code=r.code,this.name="TRPCError",this.cause||(this.cause=e)}}function Y(n){const r=Object.create(null);for(const e in n){const i=n[e];r[i]=e}return r}const K={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};Y(K);Y(K);function te(n){var a;const{type:r,path:e}=n;if(!(e in n.procedures)||!((a=n.procedures[e])!=null&&a._def[r]))throw new N({code:"NOT_FOUND",message:`No "${r}"-procedure on path "${e}"`});const i=n.procedures[e];return i(n)}var W,z,x,B,V,J;typeof window>"u"||"Deno"in window||((z=(W=globalThis.process)==null?void 0:W.env)==null?void 0:z.NODE_ENV)==="test"||(B=(x=globalThis.process)==null?void 0:x.env)!=null&&B.JEST_WORKER_ID||(J=(V=globalThis.process)==null?void 0:V.env)!=null&&J.VITEST_WORKER_ID;function oe(n){return typeof n=="object"&&n!==null&&"subscribe"in n}function $(n,r){return"error"in r?{...r,error:n.transformer.output.serialize(r.error)}:"data"in r.result?{...r,result:{...r.result,data:n.transformer.output.serialize(r.result.data)}}:r}function se(n,r){return Array.isArray(r)?r.map(e=>$(n,e)):$(n,r)}function j(n){if(n instanceof N)return n;const r=ie(n),e=new N({code:"INTERNAL_SERVER_ERROR",cause:r,message:r.message});return e.stack=r.stack,e}function ie(n){return n instanceof Error?n:typeof n=="string"?new Error(n):new Error("Unknown error")}function ce(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var M={exports:{}},D,H;function ae(){if(H)return D;H=1;var n=1e3,r=n*60,e=r*60,i=e*24,a=i*7,C=i*365.25;D=function(t,o){o=o||{};var s=typeof t;if(s==="string"&&t.length>0)return p(t);if(s==="number"&&isFinite(t))return o.long?c(t):g(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function p(t){if(t=String(t),!(t.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]),d=(o[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return s*C;case"weeks":case"week":case"w":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*e;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function g(t){var o=Math.abs(t);return o>=i?Math.round(t/i)+"d":o>=e?Math.round(t/e)+"h":o>=r?Math.round(t/r)+"m":o>=n?Math.round(t/n)+"s":t+"ms"}function c(t){var o=Math.abs(t);return o>=i?u(t,o,i,"day"):o>=e?u(t,o,e,"hour"):o>=r?u(t,o,r,"minute"):o>=n?u(t,o,n,"second"):t+" ms"}function u(t,o,s,d){var h=o>=s*1.5;return Math.round(t/s)+" "+d+(h?"s":"")}return D}function ue(n){e.debug=e,e.default=e,e.coerce=c,e.disable=C,e.enable=a,e.enabled=p,e.humanize=ae(),e.destroy=u,Object.keys(n).forEach(t=>{e[t]=n[t]}),e.names=[],e.skips=[],e.formatters={};function r(t){let o=0;for(let s=0;s<t.length;s++)o=(o<<5)-o+t.charCodeAt(s),o|=0;return e.colors[Math.abs(o)%e.colors.length]}e.selectColor=r;function e(t){let o,s=null,d,h;function l(...f){if(!l.enabled)return;const b=l,T=Number(new Date),G=T-(o||T);b.diff=G,b.prev=o,b.curr=T,o=T,f[0]=e.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let _=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(P,q)=>{if(P==="%%")return"%";_++;const L=e.formatters[q];if(typeof L=="function"){const X=f[_];P=L.call(b,X),f.splice(_,1),_--}return P}),e.formatArgs.call(b,f),(b.log||e.log).apply(b,f)}return l.namespace=t,l.useColors=e.useColors(),l.color=e.selectColor(t),l.extend=i,l.destroy=e.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>s!==null?s:(d!==e.namespaces&&(d=e.namespaces,h=e.enabled(t)),h),set:f=>{s=f}}),typeof e.init=="function"&&e.init(l),l}function i(t,o){const s=e(this.namespace+(typeof o>"u"?":":o)+t);return s.log=this.log,s}function a(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];let o;const s=(typeof t=="string"?t:"").split(/[\s,]+/),d=s.length;for(o=0;o<d;o++)s[o]&&(t=s[o].replace(/\*/g,".*?"),t[0]==="-"?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function C(){const t=[...e.names.map(g),...e.skips.map(g).map(o=>"-"+o)].join(",");return e.enable(""),t}function p(t){if(t[t.length-1]==="*")return!0;let o,s;for(o=0,s=e.skips.length;o<s;o++)if(e.skips[o].test(t))return!1;for(o=0,s=e.names.length;o<s;o++)if(e.names[o].test(t))return!0;return!1}function g(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function c(t){return t instanceof Error?t.stack||t.message:t}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var de=ue;(function(n,r){r.formatArgs=i,r.save=a,r.load=C,r.useColors=e,r.storage=p(),r.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let t=0,o=0;c[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(t++,s==="%c"&&(o=t))}),c.splice(o,0,u)}r.log=console.debug||console.log||(()=>{});function a(c){try{c?r.storage.setItem("debug",c):r.storage.removeItem("debug")}catch{}}function C(){let c;try{c=r.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function p(){try{return localStorage}catch{}}n.exports=de(r);const{formatters:g}=n.exports;g.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(M,M.exports);var le=M.exports;const Q=ce(le),fe=Q("electron-trpc:main:handleIPCMessage");async function Ce({router:n,createContext:r,internalId:e,message:i,event:a,subscriptions:C}){if(i.method==="subscription.stop"){const d=C.get(e);if(!d)return;d.unsubscribe(),C.delete(e);return}const{type:p,input:g,path:c,id:u}=i.operation,t=g?n._def._config.transformer.input.deserialize(g):void 0,o=await(r==null?void 0:r({event:a}))??{},s=d=>{a.sender.isDestroyed()||a.reply(R,se(n._def._config,d))};try{const d=await te({ctx:o,path:c,procedures:n._def.procedures,rawInput:t,type:p});if(p!=="subscription"){s({id:u,result:{type:"data",data:d}});return}else if(!oe(d))throw new N({message:`Subscription ${c} did not return an observable`,code:"INTERNAL_SERVER_ERROR"});const h=d.subscribe({next(l){s({id:u,result:{type:"data",data:l}})},error(l){const f=j(l);s({id:u,error:n.getErrorShape({error:f,type:p,path:c,input:t,ctx:o})})},complete(){s({id:u,result:{type:"stopped"}})}});fe("Creating subscription",e),C.set(e,h)}catch(d){const h=j(d);return s({id:u,error:n.getErrorShape({error:h,type:p,path:c,input:t,ctx:o})})}}const m=Q("electron-trpc:main:IPCHandler"),pe=(n,r)=>{const e=r.method==="request"?r.operation.id:r.id;return`${n.sender.id}-${n.senderFrame.routingId}:${e}`};var E,w,O,k,A,Z;class ge{constructor({createContext:r,router:e,windows:i=[]}){y(this,O);y(this,A);y(this,E,[]);y(this,w,new Map);i.forEach(a=>this.attachWindow(a)),I.ipcMain.on(R,(a,C)=>{Ce({router:e,createContext:r,internalId:pe(a,C),event:a,message:C,subscriptions:F(this,w)})})}attachWindow(r){F(this,E).includes(r)||(m("Attaching window",r.id),F(this,E).push(r),v(this,A,Z).call(this,r))}detachWindow(r){m("Detaching window",r.id),U(this,E,F(this,E).filter(e=>e!==r)),v(this,O,k).call(this,{webContentsId:r.webContents.id})}}E=new WeakMap,w=new WeakMap,O=new WeakSet,k=function({webContentsId:r,frameRoutingId:e}){for(const[i,a]of F(this,w).entries())i.startsWith(`${r}-${e??""}`)&&(m("Closing subscription",i),a.unsubscribe(),F(this,w).delete(i))},A=new WeakSet,Z=function(r){r.webContents.on("did-start-navigation",({frame:e})=>{m("Handling webContents `did-start-navigation` event",`webContentsId: ${r.webContents.id}`,`frameRoutingId: ${e.routingId}`),v(this,O,k).call(this,{webContentsId:r.webContents.id,frameRoutingId:e.routingId})}),r.webContents.on("destroyed",()=>{m("Handling webContents `destroyed` event"),this.detachWindow(r)})};const he=({createContext:n,router:r,windows:e=[]})=>new ge({createContext:n,router:r,windows:e}),be=()=>{const n={sendMessage:r=>I.ipcRenderer.send(R,r),onMessage:r=>I.ipcRenderer.on(R,(e,i)=>r(i))};I.contextBridge.exposeInMainWorld("electronTRPC",n)};exports.ELECTRON_TRPC_CHANNEL=R;exports.createIPCHandler=he;exports.exposeElectronTRPC=be;
+"use strict";var A=(n,r,e)=>{if(!r.has(n))throw TypeError("Cannot "+e)};var F=(n,r,e)=>(A(n,r,"read from private field"),e?e.call(n):r.get(n)),y=(n,r,e)=>{if(r.has(n))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(n):r.set(n,e)},L=(n,r,e,i)=>(A(n,r,"write to private field"),i?i.call(n,e):r.set(n,e),e);var v=(n,r,e)=>(A(n,r,"access private method"),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const X=require("electron"),k="electron-trpc";function ee(n){return!!n&&!Array.isArray(n)&&typeof n=="object"}class re extends Error{}function ne(n){if(n instanceof Error)return n;const r=typeof n;if(!(r==="undefined"||r==="function"||n===null)){if(r!=="object")return new Error(String(n));if(ee(n)){const e=new re;for(const i in n)e[i]=n[i];return e}}}class T extends Error{constructor(r){const e=ne(r.cause),i=r.message??(e==null?void 0:e.message)??r.code;super(i,{cause:e}),this.code=r.code,this.name="TRPCError",this.cause||(this.cause=e)}}function Y(n){const r=Object.create(null);for(const e in n){const i=n[e];r[i]=e}return r}const x={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};Y(x);Y(x);function te(n){var a;const{type:r,path:e}=n;if(!(e in n.procedures)||!((a=n.procedures[e])!=null&&a._def[r]))throw new T({code:"NOT_FOUND",message:`No "${r}"-procedure on path "${e}"`});const i=n.procedures[e];return i(n)}var H,z,W,B,V,J;typeof window>"u"||"Deno"in window||((z=(H=globalThis.process)==null?void 0:H.env)==null?void 0:z.NODE_ENV)==="test"||(B=(W=globalThis.process)==null?void 0:W.env)!=null&&B.JEST_WORKER_ID||(J=(V=globalThis.process)==null?void 0:V.env)!=null&&J.VITEST_WORKER_ID;function oe(n){return typeof n=="object"&&n!==null&&"subscribe"in n}function U(n,r){return"error"in r?{...r,error:n.transformer.output.serialize(r.error)}:"data"in r.result?{...r,result:{...r.result,data:n.transformer.output.serialize(r.result.data)}}:r}function se(n,r){return Array.isArray(r)?r.map(e=>U(n,e)):U(n,r)}function $(n){if(n instanceof T)return n;const r=ie(n),e=new T({code:"INTERNAL_SERVER_ERROR",cause:r,message:r.message});return e.stack=r.stack,e}function ie(n){return n instanceof Error?n:typeof n=="string"?new Error(n):new Error("Unknown error")}function ce(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P={exports:{}},S,j;function ae(){if(j)return S;j=1;var n=1e3,r=n*60,e=r*60,i=e*24,a=i*7,C=i*365.25;S=function(t,o){o=o||{};var s=typeof t;if(s==="string"&&t.length>0)return p(t);if(s==="number"&&isFinite(t))return o.long?c(t):g(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function p(t){if(t=String(t),!(t.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]),d=(o[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return s*C;case"weeks":case"week":case"w":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*e;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function g(t){var o=Math.abs(t);return o>=i?Math.round(t/i)+"d":o>=e?Math.round(t/e)+"h":o>=r?Math.round(t/r)+"m":o>=n?Math.round(t/n)+"s":t+"ms"}function c(t){var o=Math.abs(t);return o>=i?u(t,o,i,"day"):o>=e?u(t,o,e,"hour"):o>=r?u(t,o,r,"minute"):o>=n?u(t,o,n,"second"):t+" ms"}function u(t,o,s,d){var h=o>=s*1.5;return Math.round(t/s)+" "+d+(h?"s":"")}return S}function ue(n){e.debug=e,e.default=e,e.coerce=c,e.disable=C,e.enable=a,e.enabled=p,e.humanize=ae(),e.destroy=u,Object.keys(n).forEach(t=>{e[t]=n[t]}),e.names=[],e.skips=[],e.formatters={};function r(t){let o=0;for(let s=0;s<t.length;s++)o=(o<<5)-o+t.charCodeAt(s),o|=0;return e.colors[Math.abs(o)%e.colors.length]}e.selectColor=r;function e(t){let o,s=null,d,h;function l(...f){if(!l.enabled)return;const b=l,O=Number(new Date),Z=O-(o||O);b.diff=Z,b.prev=o,b.curr=O,o=O,f[0]=e.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let _=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(N,G)=>{if(N==="%%")return"%";_++;const M=e.formatters[G];if(typeof M=="function"){const q=f[_];N=M.call(b,q),f.splice(_,1),_--}return N}),e.formatArgs.call(b,f),(b.log||e.log).apply(b,f)}return l.namespace=t,l.useColors=e.useColors(),l.color=e.selectColor(t),l.extend=i,l.destroy=e.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>s!==null?s:(d!==e.namespaces&&(d=e.namespaces,h=e.enabled(t)),h),set:f=>{s=f}}),typeof e.init=="function"&&e.init(l),l}function i(t,o){const s=e(this.namespace+(typeof o>"u"?":":o)+t);return s.log=this.log,s}function a(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];let o;const s=(typeof t=="string"?t:"").split(/[\s,]+/),d=s.length;for(o=0;o<d;o++)s[o]&&(t=s[o].replace(/\*/g,".*?"),t[0]==="-"?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function C(){const t=[...e.names.map(g),...e.skips.map(g).map(o=>"-"+o)].join(",");return e.enable(""),t}function p(t){if(t[t.length-1]==="*")return!0;let o,s;for(o=0,s=e.skips.length;o<s;o++)if(e.skips[o].test(t))return!1;for(o=0,s=e.names.length;o<s;o++)if(e.names[o].test(t))return!0;return!1}function g(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function c(t){return t instanceof Error?t.stack||t.message:t}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var de=ue;(function(n,r){r.formatArgs=i,r.save=a,r.load=C,r.useColors=e,r.storage=p(),r.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let t=0,o=0;c[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(t++,s==="%c"&&(o=t))}),c.splice(o,0,u)}r.log=console.debug||console.log||(()=>{});function a(c){try{c?r.storage.setItem("debug",c):r.storage.removeItem("debug")}catch{}}function C(){let c;try{c=r.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function p(){try{return localStorage}catch{}}n.exports=de(r);const{formatters:g}=n.exports;g.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(P,P.exports);var le=P.exports;const K=ce(le),fe=K("electron-trpc:main:handleIPCMessage");async function Ce({router:n,createContext:r,internalId:e,message:i,event:a,subscriptions:C}){if(i.method==="subscription.stop"){const d=C.get(e);if(!d)return;d.unsubscribe(),C.delete(e);return}const{type:p,input:g,path:c,id:u}=i.operation,t=g?n._def._config.transformer.input.deserialize(g):void 0,o=await(r==null?void 0:r({event:a}))??{},s=d=>{a.sender.isDestroyed()||a.reply(k,se(n._def._config,d))};try{const d=await te({ctx:o,path:c,procedures:n._def.procedures,rawInput:t,type:p});if(p!=="subscription"){s({id:u,result:{type:"data",data:d}});return}else if(!oe(d))throw new T({message:`Subscription ${c} did not return an observable`,code:"INTERNAL_SERVER_ERROR"});const h=d.subscribe({next(l){s({id:u,result:{type:"data",data:l}})},error(l){const f=$(l);s({id:u,error:n.getErrorShape({error:f,type:p,path:c,input:t,ctx:o})})},complete(){s({id:u,result:{type:"stopped"}})}});fe("Creating subscription",e),C.set(e,h)}catch(d){const h=$(d);return s({id:u,error:n.getErrorShape({error:h,type:p,path:c,input:t,ctx:o})})}}const m=K("electron-trpc:main:IPCHandler"),pe=(n,r)=>{const e=r.method==="request"?r.operation.id:r.id;return`${n.sender.id}-${n.senderFrame.routingId}:${e}`};var w,E,R,D,I,Q;class ge{constructor({createContext:r,router:e,windows:i=[]}){y(this,R);y(this,I);y(this,w,[]);y(this,E,new Map);i.forEach(a=>this.attachWindow(a)),X.ipcMain.on(k,(a,C)=>{Ce({router:e,createContext:r,internalId:pe(a,C),event:a,message:C,subscriptions:F(this,E)})})}attachWindow(r){F(this,w).includes(r)||(m("Attaching window",r.id),F(this,w).push(r),v(this,I,Q).call(this,r))}detachWindow(r){m("Detaching window",r.id),L(this,w,F(this,w).filter(e=>e!==r)),v(this,R,D).call(this,{webContentsId:r.webContents.id})}}w=new WeakMap,E=new WeakMap,R=new WeakSet,D=function({webContentsId:r,frameRoutingId:e}){for(const[i,a]of F(this,E).entries())i.startsWith(`${r}-${e??""}`)&&(m("Closing subscription",i),a.unsubscribe(),F(this,E).delete(i))},I=new WeakSet,Q=function(r){r.webContents.on("did-start-navigation",({frame:e})=>{m("Handling webContents `did-start-navigation` event",`webContentsId: ${r.webContents.id}`,`frameRoutingId: ${e.routingId}`),v(this,R,D).call(this,{webContentsId:r.webContents.id,frameRoutingId:e.routingId})}),r.webContents.on("destroyed",()=>{m("Handling webContents `destroyed` event"),this.detachWindow(r)})};const he=({createContext:n,router:r,windows:e=[]})=>new ge({createContext:n,router:r,windows:e});exports.ELECTRON_TRPC_CHANNEL=k;exports.createIPCHandler=he;
diff --git a/dist/main.d.ts b/dist/main.d.ts
index f164ec1804d7d06446c844b10f707f257f79ec3c..a8cd70b660e15bd574e0a1a84c1c1aa22ae14eb4 100644
--- a/dist/main.d.ts
+++ b/dist/main.d.ts
@@ -23,6 +23,5 @@ export declare const createIPCHandler: <TRouter extends AnyRouter>({ createConte
 	router: TRouter;
 	windows?: Electron.BrowserWindow[];
 }) => IPCHandler<TRouter>;
-export declare const exposeElectronTRPC: () => void;
 
 export {};
diff --git a/dist/main.mjs b/dist/main.mjs
index 07971dbce29952b2a466b683c00b5233f27cf081..13084989f4aae704b5bf52dd841192ff04001eea 100644
--- a/dist/main.mjs
+++ b/dist/main.mjs
@@ -1,29 +1,29 @@
-var S = (n, r, e) => {
+var A = (n, r, e) => {
   if (!r.has(n))
     throw TypeError("Cannot " + e);
 };
-var F = (n, r, e) => (S(n, r, "read from private field"), e ? e.call(n) : r.get(n)), m = (n, r, e) => {
+var F = (n, r, e) => (A(n, r, "read from private field"), e ? e.call(n) : r.get(n)), E = (n, r, e) => {
   if (r.has(n))
     throw TypeError("Cannot add the same private member more than once");
   r instanceof WeakSet ? r.add(n) : r.set(n, e);
-}, L = (n, r, e, i) => (S(n, r, "write to private field"), i ? i.call(n, e) : r.set(n, e), e);
-var v = (n, r, e) => (S(n, r, "access private method"), e);
-import { ipcMain as ee, contextBridge as re, ipcRenderer as U } from "electron";
-const T = "electron-trpc";
-function ne(n) {
+}, M = (n, r, e, i) => (A(n, r, "write to private field"), i ? i.call(n, e) : r.set(n, e), e);
+var v = (n, r, e) => (A(n, r, "access private method"), e);
+import { ipcMain as X } from "electron";
+const x = "electron-trpc";
+function ee(n) {
   return !!n && !Array.isArray(n) && typeof n == "object";
 }
-class te extends Error {
+class re extends Error {
 }
-function oe(n) {
+function ne(n) {
   if (n instanceof Error)
     return n;
   const r = typeof n;
   if (!(r === "undefined" || r === "function" || n === null)) {
     if (r !== "object")
       return new Error(String(n));
-    if (ne(n)) {
-      const e = new te();
+    if (ee(n)) {
+      const e = new re();
       for (const i in n)
         e[i] = n[i];
       return e;
@@ -32,13 +32,13 @@ function oe(n) {
 }
 class I extends Error {
   constructor(r) {
-    const e = oe(r.cause), i = r.message ?? (e == null ? void 0 : e.message) ?? r.code;
+    const e = ne(r.cause), i = r.message ?? (e == null ? void 0 : e.message) ?? r.code;
     super(i, {
       cause: e
     }), this.code = r.code, this.name = "TRPCError", this.cause || (this.cause = e);
   }
 }
-function Y(n) {
+function J(n) {
   const r = /* @__PURE__ */ Object.create(null);
   for (const e in n) {
     const i = n[e];
@@ -46,7 +46,7 @@ function Y(n) {
   }
   return r;
 }
-const K = {
+const Y = {
   /**
   * Invalid JSON was received by the server.
   * An error occurred on the server while parsing the JSON text.
@@ -72,9 +72,9 @@ const K = {
   TOO_MANY_REQUESTS: -32029,
   CLIENT_CLOSED_REQUEST: -32099
 };
-Y(K);
-Y(K);
-function se(n) {
+J(Y);
+J(Y);
+function te(n) {
   var a;
   const { type: r, path: e } = n;
   if (!(e in n.procedures) || !((a = n.procedures[e]) != null && a._def[r]))
@@ -85,12 +85,12 @@ function se(n) {
   const i = n.procedures[e];
   return i(n);
 }
-var W, z, x, B, V, J;
-typeof window > "u" || "Deno" in window || ((z = (W = globalThis.process) == null ? void 0 : W.env) == null ? void 0 : z.NODE_ENV) === "test" || (B = (x = globalThis.process) == null ? void 0 : x.env) != null && B.JEST_WORKER_ID || (J = (V = globalThis.process) == null ? void 0 : V.env) != null && J.VITEST_WORKER_ID;
-function ie(n) {
+var j, H, z, W, B, V;
+typeof window > "u" || "Deno" in window || ((H = (j = globalThis.process) == null ? void 0 : j.env) == null ? void 0 : H.NODE_ENV) === "test" || (W = (z = globalThis.process) == null ? void 0 : z.env) != null && W.JEST_WORKER_ID || (V = (B = globalThis.process) == null ? void 0 : B.env) != null && V.VITEST_WORKER_ID;
+function oe(n) {
   return typeof n == "object" && n !== null && "subscribe" in n;
 }
-function $(n, r) {
+function L(n, r) {
   return "error" in r ? {
     ...r,
     error: n.transformer.output.serialize(r.error)
@@ -102,32 +102,32 @@ function $(n, r) {
     }
   } : r;
 }
-function ce(n, r) {
-  return Array.isArray(r) ? r.map((e) => $(n, e)) : $(n, r);
+function se(n, r) {
+  return Array.isArray(r) ? r.map((e) => L(n, e)) : L(n, r);
 }
-function j(n) {
+function U(n) {
   if (n instanceof I)
     return n;
-  const r = ae(n), e = new I({
+  const r = ie(n), e = new I({
     code: "INTERNAL_SERVER_ERROR",
     cause: r,
     message: r.message
   });
   return e.stack = r.stack, e;
 }
-function ae(n) {
+function ie(n) {
   return n instanceof Error ? n : typeof n == "string" ? new Error(n) : new Error("Unknown error");
 }
-function ue(n) {
+function ce(n) {
   return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
 }
-var D = { exports: {} }, P, H;
-function de() {
-  if (H)
-    return P;
-  H = 1;
+var D = { exports: {} }, S, $;
+function ae() {
+  if ($)
+    return S;
+  $ = 1;
   var n = 1e3, r = n * 60, e = r * 60, i = e * 24, a = i * 7, C = i * 365.25;
-  P = function(t, o) {
+  S = function(t, o) {
     o = o || {};
     var s = typeof t;
     if (s === "string" && t.length > 0)
@@ -202,10 +202,10 @@ function de() {
     var h = o >= s * 1.5;
     return Math.round(t / s) + " " + d + (h ? "s" : "");
   }
-  return P;
+  return S;
 }
-function le(n) {
-  e.debug = e, e.default = e, e.coerce = c, e.disable = C, e.enable = a, e.enabled = p, e.humanize = de(), e.destroy = u, Object.keys(n).forEach((t) => {
+function ue(n) {
+  e.debug = e, e.default = e, e.coerce = c, e.disable = C, e.enable = a, e.enabled = p, e.humanize = ae(), e.destroy = u, Object.keys(n).forEach((t) => {
     e[t] = n[t];
   }), e.names = [], e.skips = [], e.formatters = {};
   function r(t) {
@@ -220,19 +220,19 @@ function le(n) {
     function l(...f) {
       if (!l.enabled)
         return;
-      const b = l, O = Number(/* @__PURE__ */ new Date()), G = O - (o || O);
-      b.diff = G, b.prev = o, b.curr = O, o = O, f[0] = e.coerce(f[0]), typeof f[0] != "string" && f.unshift("%O");
+      const b = l, O = Number(/* @__PURE__ */ new Date()), Z = O - (o || O);
+      b.diff = Z, b.prev = o, b.curr = O, o = O, f[0] = e.coerce(f[0]), typeof f[0] != "string" && f.unshift("%O");
       let _ = 0;
-      f[0] = f[0].replace(/%([a-zA-Z%])/g, (A, q) => {
-        if (A === "%%")
+      f[0] = f[0].replace(/%([a-zA-Z%])/g, (N, G) => {
+        if (N === "%%")
           return "%";
         _++;
-        const k = e.formatters[q];
+        const k = e.formatters[G];
         if (typeof k == "function") {
-          const X = f[_];
-          A = k.call(b, X), f.splice(_, 1), _--;
+          const q = f[_];
+          N = k.call(b, q), f.splice(_, 1), _--;
         }
-        return A;
+        return N;
       }), e.formatArgs.call(b, f), (b.log || e.log).apply(b, f);
     }
     return l.namespace = t, l.useColors = e.useColors(), l.color = e.selectColor(t), l.extend = i, l.destroy = e.destroy, Object.defineProperty(l, "enabled", {
@@ -285,7 +285,7 @@ function le(n) {
   }
   return e.enable(e.load()), e;
 }
-var fe = le;
+var de = ue;
 (function(n, r) {
   r.formatArgs = i, r.save = a, r.load = C, r.useColors = e, r.storage = p(), r.destroy = /* @__PURE__ */ (() => {
     let c = !1;
@@ -409,7 +409,7 @@ var fe = le;
     } catch {
     }
   }
-  n.exports = fe(r);
+  n.exports = de(r);
   const { formatters: g } = n.exports;
   g.j = function(c) {
     try {
@@ -419,9 +419,9 @@ var fe = le;
     }
   };
 })(D, D.exports);
-var Ce = D.exports;
-const Q = /* @__PURE__ */ ue(Ce), pe = Q("electron-trpc:main:handleIPCMessage");
-async function ge({
+var le = D.exports;
+const K = /* @__PURE__ */ ce(le), fe = K("electron-trpc:main:handleIPCMessage");
+async function Ce({
   router: n,
   createContext: r,
   internalId: e,
@@ -437,10 +437,10 @@ async function ge({
     return;
   }
   const { type: p, input: g, path: c, id: u } = i.operation, t = g ? n._def._config.transformer.input.deserialize(g) : void 0, o = await (r == null ? void 0 : r({ event: a })) ?? {}, s = (d) => {
-    a.sender.isDestroyed() || a.reply(T, ce(n._def._config, d));
+    a.sender.isDestroyed() || a.reply(x, se(n._def._config, d));
   };
   try {
-    const d = await se({
+    const d = await te({
       ctx: o,
       path: c,
       procedures: n._def.procedures,
@@ -456,7 +456,7 @@ async function ge({
         }
       });
       return;
-    } else if (!ie(d))
+    } else if (!oe(d))
       throw new I({
         message: `Subscription ${c} did not return an observable`,
         code: "INTERNAL_SERVER_ERROR"
@@ -472,7 +472,7 @@ async function ge({
         });
       },
       error(l) {
-        const f = j(l);
+        const f = U(l);
         s({
           id: u,
           error: n.getErrorShape({
@@ -493,9 +493,9 @@ async function ge({
         });
       }
     });
-    pe("Creating subscription", e), C.set(e, h);
+    fe("Creating subscription", e), C.set(e, h);
   } catch (d) {
-    const h = j(d);
+    const h = U(d);
     return s({
       id: u,
       error: n.getErrorShape({
@@ -508,52 +508,52 @@ async function ge({
     });
   }
 }
-const y = Q("electron-trpc:main:IPCHandler"), he = (n, r) => {
+const y = K("electron-trpc:main:IPCHandler"), pe = (n, r) => {
   const e = r.method === "request" ? r.operation.id : r.id;
   return `${n.sender.id}-${n.senderFrame.routingId}:${e}`;
 };
-var w, E, R, M, N, Z;
-class be {
+var w, m, R, P, T, Q;
+class ge {
   constructor({
     createContext: r,
     router: e,
     windows: i = []
   }) {
-    m(this, R);
-    m(this, N);
-    m(this, w, []);
-    m(this, E, /* @__PURE__ */ new Map());
-    i.forEach((a) => this.attachWindow(a)), ee.on(T, (a, C) => {
-      ge({
+    E(this, R);
+    E(this, T);
+    E(this, w, []);
+    E(this, m, /* @__PURE__ */ new Map());
+    i.forEach((a) => this.attachWindow(a)), X.on(x, (a, C) => {
+      Ce({
         router: e,
         createContext: r,
-        internalId: he(a, C),
+        internalId: pe(a, C),
         event: a,
         message: C,
-        subscriptions: F(this, E)
+        subscriptions: F(this, m)
       });
     });
   }
   attachWindow(r) {
-    F(this, w).includes(r) || (y("Attaching window", r.id), F(this, w).push(r), v(this, N, Z).call(this, r));
+    F(this, w).includes(r) || (y("Attaching window", r.id), F(this, w).push(r), v(this, T, Q).call(this, r));
   }
   detachWindow(r) {
-    y("Detaching window", r.id), L(this, w, F(this, w).filter((e) => e !== r)), v(this, R, M).call(this, { webContentsId: r.webContents.id });
+    y("Detaching window", r.id), M(this, w, F(this, w).filter((e) => e !== r)), v(this, R, P).call(this, { webContentsId: r.webContents.id });
   }
 }
-w = new WeakMap(), E = new WeakMap(), R = new WeakSet(), M = function({
+w = new WeakMap(), m = new WeakMap(), R = new WeakSet(), P = function({
   webContentsId: r,
   frameRoutingId: e
 }) {
-  for (const [i, a] of F(this, E).entries())
-    i.startsWith(`${r}-${e ?? ""}`) && (y("Closing subscription", i), a.unsubscribe(), F(this, E).delete(i));
-}, N = new WeakSet(), Z = function(r) {
+  for (const [i, a] of F(this, m).entries())
+    i.startsWith(`${r}-${e ?? ""}`) && (y("Closing subscription", i), a.unsubscribe(), F(this, m).delete(i));
+}, T = new WeakSet(), Q = function(r) {
   r.webContents.on("did-start-navigation", ({ frame: e }) => {
     y(
       "Handling webContents `did-start-navigation` event",
       `webContentsId: ${r.webContents.id}`,
       `frameRoutingId: ${e.routingId}`
-    ), v(this, R, M).call(this, {
+    ), v(this, R, P).call(this, {
       webContentsId: r.webContents.id,
       frameRoutingId: e.routingId
     });
@@ -561,19 +561,12 @@ w = new WeakMap(), E = new WeakMap(), R = new WeakSet(), M = function({
     y("Handling webContents `destroyed` event"), this.detachWindow(r);
   });
 };
-const me = ({
+const we = ({
   createContext: n,
   router: r,
   windows: e = []
-}) => new be({ createContext: n, router: r, windows: e }), ye = () => {
-  const n = {
-    sendMessage: (r) => U.send(T, r),
-    onMessage: (r) => U.on(T, (e, i) => r(i))
-  };
-  re.exposeInMainWorld("electronTRPC", n);
-};
+}) => new ge({ createContext: n, router: r, windows: e });
 export {
-  T as ELECTRON_TRPC_CHANNEL,
-  me as createIPCHandler,
-  ye as exposeElectronTRPC
+  x as ELECTRON_TRPC_CHANNEL,
+  we as createIPCHandler
 };
diff --git a/node_modules/electron-trpc/dist/preload.cjs b/dist/preload.cjs
new file mode 100644
index 0000000000000000000000000000000000000000..ca3eaeff8e2bc0ed62dc82a5030ba228ec988b32
--- /dev/null
+++ b/dist/preload.cjs
@@ -0,0 +1 @@
+"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("electron"),o="electron-trpc",c=()=>{const t={sendMessage:e=>n.ipcRenderer.send(o,e),onMessage:e=>n.ipcRenderer.on(o,(s,r)=>e(r))};n.contextBridge.exposeInMainWorld("electronTRPC",t)};exports.exposeElectronTRPC=c;
diff --git a/node_modules/electron-trpc/dist/preload.d.ts b/dist/preload.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..55dc9d784d639a4eab6d151697b78b1e1898d477
--- /dev/null
+++ b/dist/preload.d.ts
@@ -0,0 +1,5 @@
+// Generated by dts-bundle-generator v9.5.1
+
+export declare const exposeElectronTRPC: () => void;
+
+export {};
diff --git a/node_modules/electron-trpc/dist/preload.mjs b/dist/preload.mjs
new file mode 100644
index 0000000000000000000000000000000000000000..ce5b3f9760f6dc63edd3d7a7ae58bbbd96420623
--- /dev/null
+++ b/dist/preload.mjs
@@ -0,0 +1,11 @@
+import { contextBridge as s, ipcRenderer as n } from "electron";
+const o = "electron-trpc", C = () => {
+  const t = {
+    sendMessage: (e) => n.send(o, e),
+    onMessage: (e) => n.on(o, (c, r) => e(r))
+  };
+  s.exposeInMainWorld("electronTRPC", t);
+};
+export {
+  C as exposeElectronTRPC
+};
diff --git a/main.d.ts b/main.d.ts
index f164ec1804d7d06446c844b10f707f257f79ec3c..a8cd70b660e15bd574e0a1a84c1c1aa22ae14eb4 100644
--- a/main.d.ts
+++ b/main.d.ts
@@ -23,6 +23,5 @@ export declare const createIPCHandler: <TRouter extends AnyRouter>({ createConte
 	router: TRouter;
 	windows?: Electron.BrowserWindow[];
 }) => IPCHandler<TRouter>;
-export declare const exposeElectronTRPC: () => void;
 
 export {};
diff --git a/package.json b/package.json
index 683be7f2cafbcb5238bc2cf6e8bacf0af56b09cf..b6429c404ca4e23ae775d046c483a5330fca339a 100644
--- a/package.json
+++ b/package.json
@@ -8,6 +8,11 @@
       "import": "./dist/main.mjs",
       "types": "./dist/main.d.ts"
     },
+    "./preload": {
+      "require": "./dist/preload.cjs",
+      "import": "./dist/preload.mjs",
+      "types": "./dist/preload.d.ts"
+    },
     "./renderer": {
       "require": "./dist/renderer.cjs",
       "import": "./dist/renderer.mjs",
@@ -49,9 +54,9 @@
     "debug": "^4.3.4"
   },
   "scripts": {
-    "build": "tsc && vite build -c src/main/vite.config.ts && vite build -c src/renderer/vite.config.ts && corepack pnpm build:types",
+    "build": "tsc && vite build -c src/main/vite.config.ts && vite build -c src/renderer/vite.config.ts && vite build -c src/preload/vite.config.ts && corepack pnpm build:types",
     "build:types": "dts-bundle-generator --config ./dts-bundle-generator.config.ts && corepack pnpm run copy:types",
-    "copy:types": "cp dist/main.d.ts dist/renderer.d.ts ./",
+    "copy:types": "cp dist/main.d.ts dist/renderer.d.ts dist/preload.d.ts ./",
     "test": "vitest -c vitest.config.ts",
     "test:ci": "vitest run -c vitest.config.ts --coverage",
     "changeset": "changeset",
diff --git a/src/main/index.ts b/src/main/index.ts
index 4061ae1fa23e63939a9abaa24d62f4d179e02621..60e780487902b334dfbf6e85b46e0c8f1cff0979 100644
--- a/src/main/index.ts
+++ b/src/main/index.ts
@@ -1,4 +1,3 @@
 export * from '../constants';
 export * from './createIPCHandler';
-export * from './exposeElectronTRPC';
 export * from './types';
diff --git a/src/main/exposeElectronTRPC.ts b/src/preload/exposeElectronTRPC.ts
similarity index 100%
rename from src/main/exposeElectronTRPC.ts
rename to src/preload/exposeElectronTRPC.ts
diff --git a/node_modules/electron-trpc/src/preload/index.ts b/src/preload/index.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e89980096228c7727e2571c2193fbed591291047
--- /dev/null
+++ b/src/preload/index.ts
@@ -0,0 +1 @@
+export * from './exposeElectronTRPC';
diff --git a/node_modules/electron-trpc/src/preload/vite.config.ts b/src/preload/vite.config.ts
new file mode 100644
index 0000000000000000000000000000000000000000..44691c4b29a894d6cdbaa895530de84121e12651
--- /dev/null
+++ b/src/preload/vite.config.ts
@@ -0,0 +1,21 @@
+/// <reference types="vitest" />
+import path from 'path';
+import { defineConfig } from 'vite';
+
+module.exports = defineConfig({
+  base: './',
+  build: {
+    // Importantly, `main` build runs first and empties the out dir
+    emptyOutDir: false,
+    lib: {
+      entry: path.resolve(__dirname, './index.ts'),
+      name: 'electron-trpc',
+      formats: ['es', 'cjs'],
+      fileName: (format) => ({ es: 'preload.mjs', cjs: 'preload.cjs' })[format as 'es' | 'cjs'],
+    },
+    outDir: path.resolve(__dirname, '../../dist'),
+    rollupOptions: {
+      external: ['electron'],
+    },
+  },
+});
